<!doctype html>
<html lang="ko">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="static/css/style.css">
        <title>나만의 크리스마스 폴꾸</title>
    </head>
    <body class="body">
        <p class="banner">MY POLGGU</p>
        <div class="savediv">
            <button class="save_btn" type="button" onclick="downImg()">POLGGU 이미지 저장</button>
        </div>
        <div class="cardpage">
            <div class="polarea">
                <div id="savebox" class="savebox">
                    <div class="box">
                        <div id='View_area' class="back" ></div>
                        <img id="img1" class="front" src="static/img/tmp/red.png" >
                        <img id="img2" class="front" src="static/img/deco/deco.png" >
                    </div>
                    <br><div class="txt" id='result'></div>
                    <canvas id="bar2"></canvas> 
                </div>
            </div>
            <div class="filebox">
                <label for="profile_pt">이미지 업로드</label>
                <input type="file" name="profile_pt" id="profile_pt" onchange="previewImage(this,'View_area')">
            </div>
            <div class="btnarea">
                <span class="type">스타일&nbsp&nbsp</span>
                <button class="redbtn" onclick="toggleImg1()"></button>
                <button class="greenbtn" onclick="toggleImg2()"></button>
                <button class="yellowbtn" onclick="toggleImg3()"></button>
                <button class="blackbtn" onclick="toggleImg4()"></button>
                <br><br>
                <span class="type">스티커&nbsp&nbsp</span>
                <button class="onbtn" onclick="imgon()">ON</button>
                <button class="offbtn" onclick="imgoff()">OFF</button>
                <br>
                <br><input class="txtinput" value="텍스트를 입력하세요" id='name' onclick="this.value='';" onkeyup='printName()'/>    
            </div>
            <a class="clipboardBtn" href="" onclick=""><p class="copytxt">링크 복사</p></a>
            <input id="clip_target" type="text" value="" style="position:absolute;top:-9999em;"/>
            <br><br>
        </div>
        <p class="dev">dev | 임도연 임수민</p>
        <p class="dev">Copyright© 2020.LL.All rights reserved</p>
        <br><br>
    </div>
    <script type="text/javascript">
    function downImg(){
        html2canvas($("#savebox")[0]).then(function(canvas){
            var myImage = canvas.toDataURL();
            downloadURI(myImage, "저장할 파일명.png")
        });
    }
    function downloadURI(uri, name){
        var link = document.createElement("a")
        link.download = name;
        link.href = uri;
        document.body.appendChild(link);
        link.click();
    }
        </script>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="static/js/imgupload.js"></script>
    <script src="static/js/html2canvas.js"></script>
  </body>
</html>